{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/manifest/v4.json", "dbt_version": "1.0.1", "generated_at": "2022-02-16T08:58:43.229143Z", "invocation_id": "00a16910-82bb-4358-9492-3cb4ec9bef8b", "env": {}, "project_id": "3b6310da22d51c8c0b72986d34da1b97", "user_id": null, "send_anonymous_usage_stats": false, "adapter_type": "bigquery"}, "nodes": {"model.lumapps_datalake.fct_daily_user_content_activity__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('fct_daily_user_content_activity'), except=[\"organization_id\"]) }}\nfrom {{ ref('fct_daily_user_content_activity') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.fct_daily_user_content_activity", "model.lumapps_datalake.fct_daily_user_content_activity", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "analytics", "fct_daily_user_content_activity__ext"], "unique_id": "model.lumapps_datalake.fct_daily_user_content_activity__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/analytics/fct_daily_user_content_activity__ext.sql", "original_file_path": "models/external/analytics/fct_daily_user_content_activity__ext.sql", "name": "fct_daily_user_content_activity__ext", "alias": "fct_daily_user_content_activity__ext", "checksum": {"name": "sha256", "checksum": "c249a278c829372571cf1fb18bc44c44e278bcab43a9aad1041a85aa1b808c3f"}, "tags": ["layer:external", "dataset:external"], "refs": [["fct_daily_user_content_activity"], ["fct_daily_user_content_activity"], ["external_authorizations"]], "sources": [], "description": "Daily activity per user per content", "columns": {"user_id": {"name": "user_id", "description": "The id of the user who performed the activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "content_id": {"name": "content_id", "description": "The id of the content where activity was recorded.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "date": {"name": "date", "description": "The day of activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "nb_content_views": {"name": "nb_content_views", "description": "The number time the user view the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_comments": {"name": "nb_content_comments", "description": "The number time the user comment the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_likes": {"name": "nb_content_likes", "description": "The number time the user like the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_follows": {"name": "nb_content_follows", "description": "The number time the user follow the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_update": {"name": "nb_content_update", "description": "The number time the user update the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/analytics/analytics.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/analytics/fct_daily_user_content_activity__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1644583669.4269686}, "model.lumapps_datalake.dim_contents__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n  id,\n  status,\n  created_at,\n  published_at,\n  title,\n  slug,\n  -- Site\n  STRUCT<\n    slug string,\n    status string,\n    created_at datetime,\n    title ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    site.slug,\n    site.status,\n    site.created_at,\n    site.title\n  ) as site,\n  -- Custom content type\n  STRUCT<\n    status string,\n    created_at datetime,\n    name ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    custom_content_type.status,\n    custom_content_type.created_at,\n    custom_content_type.name\n  ) as custom_content_type,\nfrom {{ ref('dim_contents') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.dim_contents", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "lumapps", "dim_contents__ext"], "unique_id": "model.lumapps_datalake.dim_contents__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_contents__ext.sql", "original_file_path": "models/external/lumapps/dim_contents__ext.sql", "name": "dim_contents__ext", "alias": "dim_contents__ext", "checksum": {"name": "sha256", "checksum": "cf9fdf5141711a80884789f8fc299d842686db2d4220eefdedf53d9c5c803335"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_contents"], ["external_authorizations"]], "sources": [], "description": "Normalized contents table.", "columns": {"id": {"name": "id", "description": "The content id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The content status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The date of content creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "published_at": {"name": "published_at", "description": "The date of content publication.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title.code": {"name": "title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title.value": {"name": "title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug": {"name": "slug", "description": "The slug of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug.code": {"name": "slug.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug.value": {"name": "slug.value", "description": "The slug in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site": {"name": "site", "description": "The site of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.slug": {"name": "site.slug", "description": "The slug of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.status": {"name": "site.status", "description": "The status of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.created_at": {"name": "site.created_at", "description": "The date of the site creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title": {"name": "site.title", "description": "The title of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.code": {"name": "site.title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.value": {"name": "site.title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type": {"name": "custom_content_type", "description": "The custom content type of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.status": {"name": "custom_content_type.status", "description": "The status of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.created_at": {"name": "custom_content_type.created_at", "description": "The date of the custom content type creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.name": {"name": "custom_content_type.name", "description": "The name of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.name.code": {"name": "custom_content_type.name.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.title.value": {"name": "custom_content_type.title.value", "description": "The name in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/lumapps/dim_contents__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1645001923.4258125}}, "sources": {}, "macros": {}, "docs": {"dbt.__overview__": {"unique_id": "dbt.__overview__", "package_name": "dbt", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/venv-dev/lib/python3.9/site-packages/dbt/include/global_project", "path": "overview.md", "original_file_path": "docs/overview.md", "name": "__overview__", "block_contents": "### Welcome!\n\nWelcome to the auto-generated documentation for your dbt project!\n\n### Navigation\n\nYou can use the `Project` and `Database` navigation tabs on the left side of the window to explore the models\nin your project.\n\n#### Project Tab\nThe `Project` tab mirrors the directory structure of your dbt project. In this tab, you can see all of the\nmodels defined in your dbt project, as well as models imported from dbt packages.\n\n#### Database Tab\nThe `Database` tab also exposes your models, but in a format that looks more like a database explorer. This view\nshows relations (tables and views) grouped into database schemas. Note that ephemeral models are _not_ shown\nin this interface, as they do not exist in the database.\n\n### Graph Exploration\nYou can click the blue icon on the bottom-right corner of the page to view the lineage graph of your models.\n\nOn model pages, you'll see the immediate parents and children of the model you're exploring. By clicking the `Expand`\nbutton at the top-right of this lineage pane, you'll be able to see all of the models that are used to build,\nor are built from, the model you're exploring.\n\nOnce expanded, you'll be able to use the `--select` and `--exclude` model selection syntax to filter the\nmodels in the graph. For more information on model selection, check out the [dbt docs](https://docs.getdbt.com/docs/model-selection-syntax).\n\nNote that you can also right-click on models to interactively filter and explore the graph.\n\n---\n\n### More information\n\n- [What is dbt](https://docs.getdbt.com/docs/introduction)?\n- Read the [dbt viewpoint](https://docs.getdbt.com/docs/viewpoint)\n- [Installation](https://docs.getdbt.com/docs/installation)\n- Join the [dbt Community](https://www.getdbt.com/community/) for questions and discussion"}, "lumapps_datalake.__overview__": {"unique_id": "lumapps_datalake.__overview__", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "overview.md", "original_file_path": "models/overview.md", "name": "__overview__", "block_contents": "# LumApps Data lake\n\n\nThis site contains the technical documentation about LumApps Data Lake.\nOnly LumApps customers with the Enterprise package are offered a read access to this database.\n\nWith direct access to the Data lake, LumApps customers can build custom dashboards\nusing their favorite BI Tools.\n\nNative LumApps dashboards are also built using the Data lake. This means:\n- Customers  have the same level of information as LumApps.\n- Customers have direct access to new aggregates LumApps builds within the Data lake.\n\n## Table Types\n\nThere are two types of tables within the Data lake : fact tables and dimension tables.\n\n### Fact Tables\n\n[Fact Tables](https://en.wikipedia.org/wiki/Fact_table) contain facts about events\nthat occurred on the platform. In the LumApps context, they contain data\nabout the interactions between users and various entities. \n\nTheir name is prefixed by `fct_` \n\n_Example: Interactions of a given user, with a given content on a given day_\n\n### Dimension Tables\n\n[Dimension Tables](https://en.wikipedia.org/wiki/Dimension_%28data_warehouse%29%23Dimension_table) describe the attributes of\nLumApps entities.\n\nTheir name is prefixed by `dim_`\n\n_Example: A description of the attributes of a content_\n\n## Connecting to the Data lake\n\nThe connection to the Data lake is done via a Google Cloud Platform (GCP) service account. To connect\nyou need to :\n- Create your [GCP service account](https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating)\nYou do not need to give the service account any permissions, LumApps will do it on the Data lake.\n- Provide your LumApps representative with the email address of your service account.\n- Your LumApps Representative will inform you when your service account has the required permissions to access the Data lake.\n- Use the service account in your favorite BI tool to set up a connection with the Data lake (BigQuery).\n\nTo set up the connection between the BI tool and the Data lake, you need the following information:\n- A service account key.\n- The billing Project : `lumapps-datalake-external`.\nIt is the project on which the compute power is billed by google.\n- The project hosting the data : It will be communicated to you by your LumApps representative.\nIt corresponds to your production environment where your data is located.\n- The dataset hosting the data : `external`.\n\n### Connection using Qlik Sense\nFollow the [documentation](https://help.qlik.com/en-US/connectors/Subsystems/ODBC_connector_help/Content/Connectors_ODBC/GoogleBigQuery/Create-GBQ-Connection.htm)\nfor **Service Authentication**\n\n### Connection using Google Data Studio\nIt is not straightforward to use data studio with bigquery through a service account.\nGoogle gives an [example](https://developers.google.com/datastudio/solution/blocks/using-service-accounts) of how it could be done."}}, "exposures": {}, "metrics": {}, "selectors": {"bronze_layer": {"name": "bronze_layer", "definition": {"method": "tag", "value": "layer:bronze"}}, "silver_layer": {"name": "silver_layer", "definition": {"method": "tag", "value": "layer:silver"}}, "gold_layer": {"name": "gold_layer", "definition": {"method": "tag", "value": "layer:gold"}}, "external_layer": {"name": "external_layer", "definition": {"method": "tag", "value": "layer:external"}}}, "disabled": {}, "parent_map": {}, "child_map": {}}