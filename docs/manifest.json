{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/manifest/v4.json", "dbt_version": "1.0.1", "generated_at": "2022-06-23T07:51:16.826458Z", "invocation_id": "6567746b-b44f-4d27-9ad4-8e639db934ea", "env": {}, "project_id": "3b6310da22d51c8c0b72986d34da1b97", "user_id": null, "send_anonymous_usage_stats": false, "adapter_type": "bigquery"}, "nodes": {"model.lumapps_analytics_dbt_multi_layers.fct_daily_user_billed_amount__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('fct_daily_user_billed_amount'), except=['billed_project']) }}\nfrom {{ ref('fct_daily_user_billed_amount') }}\n{{ external_filter_on_email(\"principal_email\") }}\nAND billed_project = 'lumapps-datalake-external'", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_analytics_dbt_multi_layers.external_filter_on_email"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.fct_daily_user_billed_amount", "model.lumapps_analytics_dbt_multi_layers.fct_daily_user_billed_amount", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "billing", "fct_daily_user_billed_amount__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.fct_daily_user_billed_amount__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/billing/fct_daily_user_billed_amount__ext.sql", "original_file_path": "models/external/billing/fct_daily_user_billed_amount__ext.sql", "name": "fct_daily_user_billed_amount__ext", "alias": "fct_daily_user_billed_amount__ext", "checksum": {"name": "sha256", "checksum": "3ecbd75bc3ffbf0b83c7cc6ac9a624680509ad1c8bcd0f7df3160350418ab12e"}, "tags": ["layer:external", "dataset:external"], "refs": [["fct_daily_user_billed_amount"], ["fct_daily_user_billed_amount"], ["external_authorizations"]], "sources": [], "description": "Daily billing grouped by user", "columns": {"principal_email": {"name": "principal_email", "description": "The email", "meta": {}, "data_type": null, "quote": null, "tags": []}, "date": {"name": "date", "description": "The date", "meta": {}, "data_type": null, "quote": null, "tags": []}, "billed_bytes": {"name": "billed_bytes", "description": "Integer amount in bytes (0 if < 1). Used for graphs.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "_last_dbt_run": {"name": "_last_dbt_run", "description": "", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/billing/billing.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/billing/fct_daily_user_billed_amount__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1653043632.5601974}, "model.lumapps_analytics_dbt_multi_layers.dim_posts__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n  id,\n  status,\n  text,\n  title,\n  type,\n  published_at as created_at,\n  -- Site\n  STRUCT<\n    slug string,\n    status string,\n    created_at datetime,\n    title ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    site_.slug,\n    site_.status,\n    site_.created_at,\n    site_.title\n  ) as site,\n  -- Community\n  STRUCT<\n    slug ARRAY<STRUCT<\n      code string,\n      value string\n    >>,\n    status string,\n    privacy string,\n    title ARRAY<STRUCT<\n      code string,\n      value string\n    >>,\n    created_at datetime\n  >(\n    community_.slug,\n    community_.status,\n    community_.privacy,\n    community_.title,\n    community_.created_at\n    ) as community,\n  -- Created By\n  STRUCT<\n    id string,\n    first_name string,\n    last_name string,\n    full_name string,\n    email string,\n    status string\n  >(\n      user_.id,\n      user_.first_name,\n      user_.last_name,\n      user_.full_name,\n      user_.email,\n      user_.status\n  ) as created_by\nfrom {{ ref('dim_posts') }}\n{{ external_filter_on_org_id(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.lumapps_analytics_dbt_multi_layers.external_filter_on_org_id"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.dim_posts", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "lumapps", "dim_posts__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.dim_posts__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_posts__ext.sql", "original_file_path": "models/external/lumapps/dim_posts__ext.sql", "name": "dim_posts__ext", "alias": "dim_posts__ext", "checksum": {"name": "sha256", "checksum": "756819468eb31229b2bde9e3b3ebe04b3253ef793ffadbada58255c24e654575"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_posts"], ["external_authorizations"]], "sources": [], "description": "Normalized posts table.", "columns": {"id": {"name": "id", "description": "The post id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The post current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "text": {"name": "text", "description": "The text of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The creation date of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "thumbnail": {"name": "thumbnail", "description": "The thumbnail URL of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site": {"name": "site", "description": "The site of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.slug": {"name": "site.slug", "description": "The slug of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.status": {"name": "site.status", "description": "The status of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.created_at": {"name": "site.created_at", "description": "The date of the site creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title": {"name": "site.title", "description": "The title of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.code": {"name": "site.title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.value": {"name": "site.title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community": {"name": "community", "description": "The community of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.status": {"name": "community.status", "description": "The current status of the community", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.privacy": {"name": "community.privacy", "description": "the privacy of the community", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.title": {"name": "community.title", "description": "The title of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.title.code": {"name": "community.title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.title.value": {"name": "community.title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "community.created_at": {"name": "community.created_at", "description": "the creation date of the community", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by": {"name": "created_by", "description": "the author of the post.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.id": {"name": "created_by.id", "description": "the id of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.first_name": {"name": "created_by.first_name", "description": "The first name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.last_name": {"name": "created_by.last_name", "description": "The last name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.full_name": {"name": "created_by.full_name", "description": "The full name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.email": {"name": "created_by.email", "description": "the email of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/lumapps/dim_posts__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1655970677.2476895}, "model.lumapps_analytics_dbt_multi_layers.dim_communities__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n  id,\n  status,\n  privacy,\n  slug,\n  title,\n  description,\n  thumbnail,\n  created_at,\n  -- Site\n  STRUCT<\n    slug string,\n    status string,\n    created_at datetime,\n    title ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    site_.slug,\n    site_.status,\n    site_.created_at,\n    site_.title\n  ) as site\nfrom {{ ref('dim_communities') }}\n{{ external_filter_on_org_id(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.lumapps_analytics_dbt_multi_layers.external_filter_on_org_id"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.dim_communities", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "lumapps", "dim_communities__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.dim_communities__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_communities__ext.sql", "original_file_path": "models/external/lumapps/dim_communities__ext.sql", "name": "dim_communities__ext", "alias": "dim_communities__ext", "checksum": {"name": "sha256", "checksum": "db8a6ffcc7e8bc4a6ab9d7dc99312411e0dddabed343c8bbc48911b2854e3934"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_communities"], ["external_authorizations"]], "sources": [], "description": "Normalized communities table.", "columns": {"id": {"name": "id", "description": "The community id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The community current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "privacy": {"name": "privacy", "description": "The privacy of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug": {"name": "slug", "description": "The slug of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "description": {"name": "description", "description": "The description of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "thumbnail": {"name": "thumbnail", "description": "The thumbnail URL of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The creation date of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site": {"name": "site", "description": "The site of the community.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.slug": {"name": "site.slug", "description": "The slug of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.status": {"name": "site.status", "description": "The status of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.created_at": {"name": "site.created_at", "description": "The date of the site creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title": {"name": "site.title", "description": "The title of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.code": {"name": "site.title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.value": {"name": "site.title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/lumapps/dim_communities__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1655970677.2387753}, "model.lumapps_analytics_dbt_multi_layers.dim_users__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n  gold_user.id,\n  gold_user.status,\n  gold_user.first_name,\n  gold_user.last_name,\n  gold_user.full_name,\n  gold_user.email,\n  gold_user.groups_\nfrom {{ ref('dim_users') }} as gold_user\n{{ external_filter_on_org_id(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.lumapps_analytics_dbt_multi_layers.external_filter_on_org_id"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.dim_users", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "lumapps", "dim_users__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.dim_users__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_users__ext.sql", "original_file_path": "models/external/lumapps/dim_users__ext.sql", "name": "dim_users__ext", "alias": "dim_users__ext", "checksum": {"name": "sha256", "checksum": "396f2d34eea942cdcb28173f16178cabbffea208c99ad01933ae7cc8bfcb51b3"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_users"], ["external_authorizations"]], "sources": [], "description": "Normalized users table.", "columns": {"id": {"name": "id", "description": "The user id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The user current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "email": {"name": "email", "description": "The email of the user.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "first_name": {"name": "first_name", "description": "The first name of the user.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "last_name": {"name": "last_name", "description": "The last name of the user.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "full_name": {"name": "full_name", "description": "The full name of the user.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "groups_": {"name": "groups_", "description": "The groups that contains the user", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/lumapps/dim_users__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1655970677.221702}, "model.lumapps_analytics_dbt_multi_layers.dim_contents__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n  id,\n  status,\n  created_at,\n  published_at,\n  title,\n  slug,\n  -- Site\n  STRUCT<\n    slug string,\n    status string,\n    created_at datetime,\n    title ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    site.slug,\n    site.status,\n    site.created_at,\n    site.title\n  ) as site,\n  -- Custom content type\n  STRUCT<\n    status string,\n    created_at datetime,\n    name ARRAY<STRUCT<\n      code string,\n      value string\n    >>\n  >(\n    custom_content_type.status,\n    custom_content_type.created_at,\n    custom_content_type.name\n  ) as custom_content_type,\n  -- Created By (Author)\n  STRUCT<\n    status string,\n    created_at datetime,\n    email string,\n    first_name string,\n    last_name string,\n    full_name string\n  >(\n    created_by.status,\n    created_by.created_at,\n    created_by.email,\n    created_by.first_name,\n    created_by.last_name,\n    created_by.full_name\n  ) as created_by\nfrom {{ ref('dim_contents') }}\n{{ external_filter_on_org_id(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.lumapps_analytics_dbt_multi_layers.external_filter_on_org_id"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.dim_contents", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "lumapps", "dim_contents__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.dim_contents__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_contents__ext.sql", "original_file_path": "models/external/lumapps/dim_contents__ext.sql", "name": "dim_contents__ext", "alias": "dim_contents__ext", "checksum": {"name": "sha256", "checksum": "ab7f26f203afd01bb43030604e2a0156e4feba2211944692f5a8c04e831cfbae"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_contents"], ["external_authorizations"]], "sources": [], "description": "Normalized contents table.", "columns": {"id": {"name": "id", "description": "The content id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The content status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The date of content creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "published_at": {"name": "published_at", "description": "The date of content publication.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title.code": {"name": "title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title.value": {"name": "title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug": {"name": "slug", "description": "The slug of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug.code": {"name": "slug.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug.value": {"name": "slug.value", "description": "The slug in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site": {"name": "site", "description": "The site of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.slug": {"name": "site.slug", "description": "The slug of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.status": {"name": "site.status", "description": "The status of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.created_at": {"name": "site.created_at", "description": "The date of the site creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title": {"name": "site.title", "description": "The title of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.code": {"name": "site.title.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site.title.value": {"name": "site.title.value", "description": "The title in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type": {"name": "custom_content_type", "description": "The custom content type of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.status": {"name": "custom_content_type.status", "description": "The status of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.created_at": {"name": "custom_content_type.created_at", "description": "The date of the custom content type creation.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.name": {"name": "custom_content_type.name", "description": "The name of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.name.code": {"name": "custom_content_type.name.code", "description": "The language code.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "custom_content_type.title.value": {"name": "custom_content_type.title.value", "description": "The name in the corresponding language.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.status": {"name": "created_by.status", "description": "The author current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.created_at": {"name": "created_by.created_at", "description": "The creation date of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.email": {"name": "created_by.email", "description": "The email of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.first_name": {"name": "created_by.first_name", "description": "The first name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.last_name": {"name": "created_by.last_name", "description": "The last name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by.full_name": {"name": "created_by.full_name", "description": "The full name of the author.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/lumapps/dim_contents__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1655970677.232155}, "model.lumapps_analytics_dbt_multi_layers.fct_daily_user_content_activity__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('fct_daily_user_content_activity'), except=[\"organization_id\"]) }}\nfrom {{ ref('fct_daily_user_content_activity') }}\n{{ external_filter_on_org_id(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_analytics_dbt_multi_layers.external_filter_on_org_id"], "nodes": ["model.lumapps_analytics_dbt_multi_layers.fct_daily_user_content_activity", "model.lumapps_analytics_dbt_multi_layers.fct_daily_user_content_activity", "seed.lumapps_analytics_dbt_multi_layers.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_analytics_dbt_multi_layers", "external", "analytics", "fct_daily_user_content_activity__ext"], "unique_id": "model.lumapps_analytics_dbt_multi_layers.fct_daily_user_content_activity__ext", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/analytics/fct_daily_user_content_activity__ext.sql", "original_file_path": "models/external/analytics/fct_daily_user_content_activity__ext.sql", "name": "fct_daily_user_content_activity__ext", "alias": "fct_daily_user_content_activity__ext", "checksum": {"name": "sha256", "checksum": "70d0934c5a7d8e17a5581e492177a833c4269a45a924fe79bb0bf48794fd31a9"}, "tags": ["layer:external", "dataset:external"], "refs": [["fct_daily_user_content_activity"], ["fct_daily_user_content_activity"], ["external_authorizations"]], "sources": [], "description": "Daily activity per user per content", "columns": {"user_id": {"name": "user_id", "description": "The id of the user who performed the activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "content_id": {"name": "content_id", "description": "The id of the content where activity was recorded.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "date": {"name": "date", "description": "The day of activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "nb_content_views": {"name": "nb_content_views", "description": "The number time the user view the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_comments": {"name": "nb_content_comments", "description": "The number time the user comment the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_likes": {"name": "nb_content_likes", "description": "The number time the user like the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_follows": {"name": "nb_content_follows", "description": "The number time the user follow the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_update": {"name": "nb_content_update", "description": "The number time the user update the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_analytics_dbt_multi_layers://models/external/analytics/analytics.yml", "compiled_path": "target/compiled/lumapps_analytics_dbt_multi_layers/models/external/analytics/fct_daily_user_content_activity__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1655970677.3570838}}, "sources": {}, "macros": {}, "docs": {"dbt.__overview__": {"unique_id": "dbt.__overview__", "package_name": "dbt", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/venv-dbt/lib/python3.9/site-packages/dbt/include/global_project", "path": "overview.md", "original_file_path": "docs/overview.md", "name": "__overview__", "block_contents": "### Welcome!\n\nWelcome to the auto-generated documentation for your dbt project!\n\n### Navigation\n\nYou can use the `Project` and `Database` navigation tabs on the left side of the window to explore the models\nin your project.\n\n#### Project Tab\nThe `Project` tab mirrors the directory structure of your dbt project. In this tab, you can see all of the\nmodels defined in your dbt project, as well as models imported from dbt packages.\n\n#### Database Tab\nThe `Database` tab also exposes your models, but in a format that looks more like a database explorer. This view\nshows relations (tables and views) grouped into database schemas. Note that ephemeral models are _not_ shown\nin this interface, as they do not exist in the database.\n\n### Graph Exploration\nYou can click the blue icon on the bottom-right corner of the page to view the lineage graph of your models.\n\nOn model pages, you'll see the immediate parents and children of the model you're exploring. By clicking the `Expand`\nbutton at the top-right of this lineage pane, you'll be able to see all of the models that are used to build,\nor are built from, the model you're exploring.\n\nOnce expanded, you'll be able to use the `--select` and `--exclude` model selection syntax to filter the\nmodels in the graph. For more information on model selection, check out the [dbt docs](https://docs.getdbt.com/docs/model-selection-syntax).\n\nNote that you can also right-click on models to interactively filter and explore the graph.\n\n---\n\n### More information\n\n- [What is dbt](https://docs.getdbt.com/docs/introduction)?\n- Read the [dbt viewpoint](https://docs.getdbt.com/docs/viewpoint)\n- [Installation](https://docs.getdbt.com/docs/installation)\n- Join the [dbt Community](https://www.getdbt.com/community/) for questions and discussion"}, "lumapps_analytics_dbt_multi_layers.__overview__": {"unique_id": "lumapps_analytics_dbt_multi_layers.__overview__", "package_name": "lumapps_analytics_dbt_multi_layers", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "overview.md", "original_file_path": "models/overview.md", "name": "__overview__", "block_contents": "# LumApps Data lake\n\n\nThis site contains the technical documentation about LumApps Data Lake.\nOnly LumApps customers with the Enterprise package are offered a read access to this database.\n\nWith direct access to the Data lake, LumApps customers can build custom dashboards\nusing their favorite BI Tools.\n\nNative LumApps dashboards are also built using the Data lake. This means:\n- Customers  have the same level of information as LumApps.\n- Customers have direct access to new aggregates LumApps builds within the Data lake.\n\n## How to navigate this documentation\n\nOn the left drawer, expand the `lumapps-datalake` folder to list the available tables.\nFor each table, a specific documentation is available where you will find a description of each field available.\n\n### Table Types\n\nThere are two types of tables within the Data lake : fact tables and dimension tables.\n\n#### Fact Tables\n\n[Fact Tables](https://en.wikipedia.org/wiki/Fact_table) contain facts about events\nthat occurred on the platform. In the LumApps context, they contain data\nabout the interactions between users and various entities. \n\nTheir name is prefixed by `fct_` \n\n_Example: Interactions of a given user, with a given content on a given day_\n\n#### Dimension Tables\n\n[Dimension Tables](https://en.wikipedia.org/wiki/Dimension_%28data_warehouse%29%23Dimension_table) describe the attributes of\nLumApps entities.\n\nTheir name is prefixed by `dim_`\n\n_Example: A description of the attributes of a content_\n\n## Connecting to the Data lake\n\nThe connection to the Data lake is done via a Google Cloud Platform (GCP) service account. To connect\nyou need to :\n- Create your [GCP service account](https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating)\nYou do not need to give the service account any permissions, LumApps will do it on the Data lake.\n- Provide your LumApps representative with the email address of your service account.\n- Your LumApps Representative will inform you when your service account has the required permissions to access the Data lake.\n- Use the service account in your favorite BI tool to set up a connection with the Data lake (BigQuery).\n\nTo set up the connection between the BI tool and the Data lake, you need the following information:\n- A service account key.\n- The billing Project : `lumapps-datalake-external`.\nIt is the project on which the compute power is billed by google.\n- The project hosting the data : It will be communicated to you by your LumApps representative.\nIt corresponds to your production environment where your data is located. It usually looks like `hm-prod-XX-cell-XXX`\n- The dataset hosting the data : `external`.\n\nThe process of connecting to Google BigQuery is different for every BI tool. The connection is tedious to set up for\nsome of them. We will try to improve the documentation as our knowledge increases. \n\n### Connection using Metabase\n\nThe connection with Metabase is fairly straightforward.\n\n1. Edit your service-account json-keyfile and change it's `project-id` to `lumapps-datalake`\n2. In metabase, set up a new connection\n   - type : `Big Query`\n   - Name : it is up to you, it will impact how the database is displayed in metabase\n   - project Id : The project where the data is located (it looks like `hm-prod-XX-cell-XXX`)\n   - Service Account Json File : The keyfile you edited in step 1\n   - dataset id : `external`\n3. Save change and you are good to go\n\n### Connection using Looker\n\nThe connection with Looker is fairly straightforward.\n\n1. In Looker, set up a new connection\n   - Name : it is up to you, it will impact how the database is displayed in Looker\n   - Dialect : `Google Bigquery Standard SQL`\n   - project Id : `lumapps-datalake-external`\n   - dataset : `external`\n   - Use OAuth : False, you'll be using a service account\n   - Service Account Email : The email of your service account\n   - Service Account JSON/P12 file: Insert your service account keyfile\n2. Create your looker model using LookML\n    - While doing so, always target the project where the data is located (it looks like `hm-prod-XX-cell-XXX`)\n   using the statement `sql_table_name: 'PROJECT-ID.external.TABLE NAME'`\n\n### Connection using Qlik Sense\n\nA detailed explanation on how to connect Qlik and the Lumapps Datalake is available on [github](https://github.com/lumapps/dbt-docs/tree/master/bi-tools/qlik)\n\n### Connection using Tableau Software\n\nA detailed explanation on how to connect Tableau and the Lumapps Datalake is available on [github](https://github.com/lumapps/dbt-docs/tree/master/bi-tools/tableau)\n\n### Connection using PowerBI\n\nA detailed explanation on how to connect PowerBI and the Lumapps Datalake is available on [github](https://github.com/lumapps/dbt-docs/tree/master/bi-tools/tableau)\n\n### Connection using Google Data Studio\n\nDataStudio **does not** support natively the connection to google BigQuery via Service Account. \n\nIf you want to connect Datastudio to BigQuery, using a service account, you will need to setup a custom connector.\nGoogle gives an [example](https://developers.google.com/datastudio/solution/blocks/using-service-accounts) of how it could be done.\n\nLumapps tested this method and the connector we build can be found in [github](https://github.com/lumapps/dbt-docs/tree/master/bi-tools/datastudio/examples)\nFor this to work please note you have to adapt it to your own situation: \n- Enter the Json Keyfile of your service account as a json string in the script properties of your custom connector\nwith the key `SERVICE_ACCOUNT_CREDS`\n- In the BASE_SQL, change `YOUR-PROD-PROJECT` by the GCP project where your data is located\n\n```"}}, "exposures": {}, "metrics": {}, "selectors": {"bronze_layer": {"name": "bronze_layer", "definition": {"method": "tag", "value": "layer:bronze"}}, "silver_layer": {"name": "silver_layer", "definition": {"method": "tag", "value": "layer:silver"}}, "gold_layer": {"name": "gold_layer", "definition": {"method": "tag", "value": "layer:gold"}}, "external_layer": {"name": "external_layer", "definition": {"method": "tag", "value": "layer:external"}}}, "disabled": {}, "parent_map": {}, "child_map": {}}