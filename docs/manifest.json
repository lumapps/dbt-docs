{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/manifest/v4.json", "dbt_version": "1.0.1", "generated_at": "2022-02-10T16:08:58.088291Z", "invocation_id": "d63cec31-cc28-4e88-9a61-d3bddf6eb745", "env": {}, "project_id": "3b6310da22d51c8c0b72986d34da1b97", "user_id": null, "send_anonymous_usage_stats": false, "adapter_type": "bigquery"}, "nodes": {"model.lumapps_datalake.fct_daily_user_content_activity__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('fct_daily_user_content_activity'), except=[\"organization_id\"]) }}\nfrom {{ ref('fct_daily_user_content_activity') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.fct_daily_user_content_activity", "model.lumapps_datalake.fct_daily_user_content_activity", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "analytics", "fct_daily_user_content_activity__ext"], "unique_id": "model.lumapps_datalake.fct_daily_user_content_activity__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/analytics/fct_daily_user_content_activity__ext.sql", "original_file_path": "models/external/analytics/fct_daily_user_content_activity__ext.sql", "name": "fct_daily_user_content_activity__ext", "alias": "fct_daily_user_content_activity__ext", "checksum": {"name": "sha256", "checksum": "c249a278c829372571cf1fb18bc44c44e278bcab43a9aad1041a85aa1b808c3f"}, "tags": ["layer:external", "dataset:external"], "refs": [["fct_daily_user_content_activity"], ["fct_daily_user_content_activity"], ["external_authorizations"]], "sources": [], "description": "Daily activity per user per content", "columns": {"organization_id": {"name": "organization_id", "description": "The id of the organization where the activity was recorded.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "user_id": {"name": "user_id", "description": "The id of the user who performed the activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "content_id": {"name": "content_id", "description": "The id of the content where activity was recorded.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "date": {"name": "date", "description": "The day of activity.", "meta": {}, "data_type": null, "quote": null, "tags": [], "test": ["not_null"]}, "nb_content_views": {"name": "nb_content_views", "description": "The number time the user view the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_comments": {"name": "nb_content_comments", "description": "The number time the user comment the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_likes": {"name": "nb_content_likes", "description": "The number time the user like the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_follows": {"name": "nb_content_follows", "description": "The number time the user follow the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "nb_content_update": {"name": "nb_content_update", "description": "The number time the user update the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/analytics/analytics.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/analytics/fct_daily_user_content_activity__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1644508700.5011868}, "model.lumapps_datalake.dim_custom_content_types__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('dim_custom_content_types'), except=[\"organization_id\"]) }}\nfrom {{ ref('dim_custom_content_types') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.dim_custom_content_types", "model.lumapps_datalake.dim_custom_content_types", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "lumapps", "dim_custom_content_types__ext"], "unique_id": "model.lumapps_datalake.dim_custom_content_types__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_custom_content_types__ext.sql", "original_file_path": "models/external/lumapps/dim_custom_content_types__ext.sql", "name": "dim_custom_content_types__ext", "alias": "dim_custom_content_types__ext", "checksum": {"name": "sha256", "checksum": "2f05d5fd180baec4d5975fcaf71efc1d583c658532003514c59ada78d1ae7baa"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_custom_content_types"], ["dim_custom_content_types"], ["external_authorizations"]], "sources": [], "description": "Normalized custom content types table.", "columns": {"id": {"name": "id", "description": "The custom content type id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site_id": {"name": "site_id", "description": "The custom content type site id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The custom content type current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The creation date of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "name": {"name": "name", "description": "The name of the custom content type.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/lumapps/dim_custom_content_types__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1644508700.506608}, "model.lumapps_datalake.dim_sites__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('dim_sites'), except=[\"organization_id\"]) }}\nfrom {{ ref('dim_sites') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.dim_sites", "model.lumapps_datalake.dim_sites", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "lumapps", "dim_sites__ext"], "unique_id": "model.lumapps_datalake.dim_sites__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_sites__ext.sql", "original_file_path": "models/external/lumapps/dim_sites__ext.sql", "name": "dim_sites__ext", "alias": "dim_sites__ext", "checksum": {"name": "sha256", "checksum": "87e8aa210a5ffa933fc85d7338d34eeb0880ce0fcb9230580551416b665ac4c1"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_sites"], ["dim_sites"], ["external_authorizations"]], "sources": [], "description": "Normalized sites table.", "columns": {"id": {"name": "id", "description": "The site id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "slug": {"name": "slug", "description": "The slug of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The site current status.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The creation date of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the site.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/lumapps/dim_sites__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1644508700.508585}, "model.lumapps_datalake.dim_contents__ext": {"raw_sql": "{{ config(\n    materialized='view',\n    grant_access_to=[\n        {'project': target.project, 'dataset': 'gold'},\n        {'project': target.project, 'dataset': 'silver'}\n    ]\n) }}\n\nselect\n{{ dbt_utils.star(from=ref('dim_contents'), except=[\"organization_id\"]) }}\nfrom {{ ref('dim_contents') }}\n{{ external_filter(\"organization_id\") }}", "resource_type": "model", "depends_on": {"macros": ["macro.dbt_utils.star", "macro.lumapps_datalake.external_filter"], "nodes": ["model.lumapps_datalake.dim_contents", "model.lumapps_datalake.dim_contents", "seed.lumapps_datalake.external_authorizations"]}, "config": {"enabled": true, "alias": null, "schema": "external", "database": null, "tags": ["layer:external", "dataset:external"], "meta": {}, "materialized": "view", "persist_docs": {"relation": true, "columns": true}, "quoting": {}, "column_types": {}, "full_refresh": null, "on_schema_change": "append_new_columns", "labels": {"dataset": "external", "layer": "external"}, "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}], "post-hook": [], "pre-hook": []}, "database": "hm-dev-go-cell-001", "schema": "external", "fqn": ["lumapps_datalake", "external", "lumapps", "dim_contents__ext"], "unique_id": "model.lumapps_datalake.dim_contents__ext", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "external/lumapps/dim_contents__ext.sql", "original_file_path": "models/external/lumapps/dim_contents__ext.sql", "name": "dim_contents__ext", "alias": "dim_contents__ext", "checksum": {"name": "sha256", "checksum": "e014bcbd60d960e2d5fb11793e96ceaa37ba5ba368e71711b4e6d57b9f7ed76a"}, "tags": ["layer:external", "dataset:external"], "refs": [["dim_contents"], ["dim_contents"], ["external_authorizations"]], "sources": [], "description": "Normalized contents table.", "columns": {"id": {"name": "id", "description": "The content id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "site_id": {"name": "site_id", "description": "The content site id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "status": {"name": "status", "description": "The status of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "content_type_id": {"name": "content_type_id", "description": "The content type id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_at": {"name": "created_at", "description": "The creation date of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "created_by_id": {"name": "created_by_id", "description": "The content author id.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "published_at": {"name": "published_at", "description": "The publication date of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}, "title": {"name": "title", "description": "The title of the content.", "meta": {}, "data_type": null, "quote": null, "tags": []}}, "meta": {}, "docs": {"show": true}, "patch_path": "lumapps_datalake://models/external/lumapps/lumapps.yml", "compiled_path": "target/compiled/lumapps_datalake/models/external/lumapps/dim_contents__ext.sql", "build_path": null, "deferred": false, "unrendered_config": {"on_schema_change": "append_new_columns", "persist_docs": {"relation": true, "columns": true}, "schema": "external", "tags": ["layer:external", "dataset:external"], "labels": {"dataset": "external", "layer": "external"}, "materialized": "view", "grant_access_to": [{"project": "hm-dev-go-cell-001", "dataset": "gold"}, {"project": "hm-dev-go-cell-001", "dataset": "silver"}]}, "created_at": 1644508700.5043538}}, "sources": {}, "macros": {}, "docs": {"dbt.__overview__": {"unique_id": "dbt.__overview__", "package_name": "dbt", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/venv-dev/lib/python3.9/site-packages/dbt/include/global_project", "path": "overview.md", "original_file_path": "docs/overview.md", "name": "__overview__", "block_contents": "### Welcome!\n\nWelcome to the auto-generated documentation for your dbt project!\n\n### Navigation\n\nYou can use the `Project` and `Database` navigation tabs on the left side of the window to explore the models\nin your project.\n\n#### Project Tab\nThe `Project` tab mirrors the directory structure of your dbt project. In this tab, you can see all of the\nmodels defined in your dbt project, as well as models imported from dbt packages.\n\n#### Database Tab\nThe `Database` tab also exposes your models, but in a format that looks more like a database explorer. This view\nshows relations (tables and views) grouped into database schemas. Note that ephemeral models are _not_ shown\nin this interface, as they do not exist in the database.\n\n### Graph Exploration\nYou can click the blue icon on the bottom-right corner of the page to view the lineage graph of your models.\n\nOn model pages, you'll see the immediate parents and children of the model you're exploring. By clicking the `Expand`\nbutton at the top-right of this lineage pane, you'll be able to see all of the models that are used to build,\nor are built from, the model you're exploring.\n\nOnce expanded, you'll be able to use the `--select` and `--exclude` model selection syntax to filter the\nmodels in the graph. For more information on model selection, check out the [dbt docs](https://docs.getdbt.com/docs/model-selection-syntax).\n\nNote that you can also right-click on models to interactively filter and explore the graph.\n\n---\n\n### More information\n\n- [What is dbt](https://docs.getdbt.com/docs/introduction)?\n- Read the [dbt viewpoint](https://docs.getdbt.com/docs/viewpoint)\n- [Installation](https://docs.getdbt.com/docs/installation)\n- Join the [dbt Community](https://www.getdbt.com/community/) for questions and discussion"}, "lumapps_datalake.__overview__": {"unique_id": "lumapps_datalake.__overview__", "package_name": "lumapps_datalake", "root_path": "/home/jb-delafosse/Documents/git/analytics-pipelines/dbt", "path": "overview.md", "original_file_path": "models/overview.md", "name": "__overview__", "block_contents": "# Lumapps Datalake\n\n\nThis site contains the technical documentation of the Lumapps Data Lake.\nEnterprise LumApps customers are offered a read access to this database.\n\nUsing the data lake, LumApps customers are able to build custom dashboards\nusing their favorite BI Tools.\n\nThe Data Lake is also used to build native Lumapps dashboards which means:\n- customers are able to have the same level of information Lumapps does\n- when LumApps builds a new aggregate within its data lake, it is available directly to our customers\n\n## Table Types\n\nThere are two types of table within the data lake : fact tables and dimension tables.\n\n### Fact Tables\n\n[Fact Tables](https://en.wikipedia.org/wiki/Fact_table) contains facts about events\nthat occurred on the platform. In the LumApps context, they contain data\nabout the interactions of users with various entities. \n\nTheir name is prefixed by `fct_` \n\n_Example: Interactions of a given user, with a given content on a given day_\n\n### Dimension Tables\n\n[Dimension Tables](https://en.wikipedia.org/wiki/Dimension_%28data_warehouse%29%23Dimension_table) to describe attributes of\nLumapps entities.\n\nTheir name is prefixed by `dim_`\n\n_Example: A description of the attributes of a content_\n\n## Connecting to the data lake\n\nThe connection to the data lake is done via a GCP service account. To connect\nyou need to :\n- Create your [GCP service account](https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating)\nYou don't have to give it any permissions, Lumapps will do so on it's datalake\n- Contact your Customer Success Manager with the email address of your service-account\n- Your Customer success manager will inform you when your service account has the required permissions to access the datalake\n- Use the service account in your favorite BI tool to set up a connection between you and the datalake (BigQuery).\n\nInformation you will need to setup the connection:\n- A service account key\n- The billing Project : `lumapps-datalake-external`.\nIt is the project on which the compute power is billed by google.\n- The project hosting the data : It will be communicated to you by your CSM.\nIt corresponds to your production environment where your data is located\n- The dataset hosting the data : `external`\n\n### Connection using Qlik Sense\nFollow the [documentation](https://help.qlik.com/en-US/connectors/Subsystems/ODBC_connector_help/Content/Connectors_ODBC/GoogleBigQuery/Create-GBQ-Connection.htm)\nfor **Service Authentication**\n\n### Connection using Google Data Studio\nIt is not straightforward to use data studio with bigquery through a service account.\nGoogle gives an [example](https://developers.google.com/datastudio/solution/blocks/using-service-accounts) of how it could be done."}}, "exposures": {}, "metrics": {}, "selectors": {"bronze_layer": {"name": "bronze_layer", "definition": {"method": "tag", "value": "layer:bronze"}}, "silver_layer": {"name": "silver_layer", "definition": {"method": "tag", "value": "layer:silver"}}, "gold_layer": {"name": "gold_layer", "definition": {"method": "tag", "value": "layer:gold"}}, "external_layer": {"name": "external_layer", "definition": {"method": "tag", "value": "layer:external"}}}, "disabled": {}, "parent_map": {}, "child_map": {}}